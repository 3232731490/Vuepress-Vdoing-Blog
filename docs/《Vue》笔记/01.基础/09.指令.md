---
title: 指令
date: 2021-09-27 06:37:22
permalink: /pages/2b5a15/
categories:
  - 《Vue》笔记
  - 基础
tags:
  - Vue
  - 笔记
author:
  name: nilu
  link: https://github.com/3232731490
---
## 内置指令

### 1. 基本语法

```java
v-text : 替换标签中的文本内容
v-html : 可以解析html标签  有严重安全问题，在网站上动态渲染任意HTML是非常危险的，容易导致XSS攻击
v-cloak : 当模板未被解析时存在，vue实例创建后并接管容器后就删除该属性，用于解决网速等原因导致页面元素无法及		  时被渲染的问题
v-once : 初次动态渲染后就被视为静态内容，以后数据改变不会引起元素更新
v-pre : 可使用它跳过没有使用指令语法及插值语法的节点，加快编译
```

### 2. 案例

```vue
    <div id="root">
        <!--v-text : 替换标签中的文本内容-->
        <div v-text='name'></div>
        <!--v-html : 可以解析html标签  有严重安全问题，在网站上动态渲染任意HTML是非常危险的，容易导致XSS攻击-->
        <div v-html ='str'></div>
        <!--v-cloak : 当模板未被解析时存在，vue实例创建后并接管容器后就删除该属性，用于解决网速等原因导致页面元素无法及时被渲染的问题-->
        <h2 v-cloak>{{name}}</h2>
        <!--v-once : 初次动态渲染后就被视为静态内容，以后数据改变不会引起元素更新-->
        <h2 v-once>初始n:  {{n}}</h2>
        <h2>当前n:  {{n}}</h2>
        <button @click='n++'>n++</button>
        <!-- v-pre : 可使用它跳过没有使用指令语法及插值语法的节点，加快编译-->
        <h2 v-pre>学无止尽</h2>
    </div>

    <script type='text/javascript'>
        new Vue({
            el:'#root',
            data:{
                name:"倪路",
                str:"<h3>你好！</h3>",
                n:1
            }
        })
    </script>
```

## 自定义指令

### 1. 使用

```vue
v-自定义指令名='表达式或回调函数'
```

### 2. 案例

```html
	<!--
        需求1： v-big：和v-text类似，不过会把绑定的数值放大十倍
        需求2： v-fbind： 和v-bind类似，但可以让其所绑定的input获取焦点
    -->
    <div id="root">
        <h2>放大十倍后的n值：<span v-big='n'></span> </h2>
        <hr />
        <input type="text" v-fbind:value='n'>
    </div>
```

```javascript
		<script type='text/javascript'>
        // 全局指令
         Vue.directive('fbind', {
            /*
                指令与元素成功绑定时调用此函数
            */
            bind(element, binding) {
                element.value = binding.value
            },
			/*
            	指定所在元素被插入页面时调用
            */
            inserted(element) {
                element.focus()
            },
            /*
              	指令所在模板被重新解析时
            */
            update(element, binding) {
                element.value = binding.value
                element.focus()
            }
        })
        new Vue({
            el: '#root',
            data: {
                n: 1,
            },
            /*
                注意：
                    这个里面的this都是window
                    都是局部指令，在别的模板内无法使用
            */
            directives: {
                /*
                    big函数调用时机：  1、指令与元素成功绑定时； 2、指令所在模板被重新解析时
                */
                big(element, binding) {
                    element.innerText = binding.value * 10
                }  
            }
        })
    </script>
```