---
title: 【166】分数到小数
date: 2021-10-03 08:13:36
permalink: /pages/158e76/
categories:
  - LeetCode刷题日记
  - 站起来了
tags:
  - LeetCode
  - 中等
---

## 题目链接🛒
[166：分数到小数](https://leetcode-cn.com/problems/fraction-to-recurring-decimal/)

## 题目描述🎟

> 给定两个整数，分别表示分数的分子 numerator 和分母 denominator，以 字符串形式返回小数 。<br/>
>
> 如果小数部分为循环小数，则将循环的部分括在括号内。<br/>
>
> 如果存在多个答案，只需返回 任意一个 。<br/>
>
> 对于所有给定的输入，保证 答案字符串的长度小于 10^4^ 。<br/>
>
>  <br/>
>
> 示例 1： <br/>
>
> 输入：numerator = 1, denominator = 2 <br/>
> 输出："0.5" <br/> <br/>
> 示例 2： <br/>
>
> 输入：numerator = 2, denominator = 1 <br/>
> 输出："2" <br/> <br/>
> 示例 3： <br/>
>
> 输入：numerator = 2, denominator = 3 <br/>
> 输出："0.(6)" <br/> <br/>
> 示例 4： <br/>
>
> 输入：numerator = 4, denominator = 333 <br/>
> 输出："0.(012)" <br/> <br/>
> 示例 5： <br/>
>
> 输入：numerator = 1, denominator = 5 <br/>
> 输出："0.2" <br/> <br/>
>
>
> 提示： <br/>
>
> 2^31^ <= numerator, denominator <= 2^31^ - 1 <br/>
> denominator != 0 <br/>



## 解法：小学数学🥼

> 分子除分母，不够除就补0，如果发现当前分子已经出现过那就直接结束，添加循环标记

```cpp
class Solution {
public:
using ll = long long;
    string fractionToDecimal(int numerator, int denominator) {
        unordered_map<int,int> record;
        vector<ll> ans;
        int looppos=-1;
        function<void(ll,ll)> dfs =[&](ll n,ll d){
            if(n%d==0){
                ans.emplace_back(n/d);
                return;
            }else if(record.find(n)!=record.end()&&record[n]>0){
                looppos=record[n];
                return;
            }
            record[n]=ans.size();
            ans.emplace_back(n/d);
            dfs((n%d)*10,d);
        };
        string res = "";
        int64_t t1 = numerator,t2 = denominator;
        
        if(t1<0&&t2>0){
            res="-";
            t1=-t1;
        }else if(t1>0&&t2<0){
           res="-";
           t2=-t2; 
        }
        dfs(t1,t2);
        res+=to_string(ans[0]);
        for(int i=1;i<ans.size();i++){
            if(i==1) {res+=".";}
            if(looppos==i){res+="(";}
            res+=(ans[i]+'0');
        }
        if(looppos!=-1){
            res+=")";
        }
        return res;
    }
};
```

**一顿操作梦如虎，一看超过5%**

> 执行用时：**4 ms**, 在所有 C++ 提交中击败了**40.50%**的用户<br/>
>
> 内存消耗：**6.7 MB**, 在所有 C++ 提交中击败了**5.03%**的用户

## 本题点评🎉

> 细节太多，很容易爆范围，最后直接把输入变成long long来做了