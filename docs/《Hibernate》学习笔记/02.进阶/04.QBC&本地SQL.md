---
title: QBC&本地SQL
date: 2021-10-01 18:05:51
permalink: /pages/47993b/
categories:
  - 《Hibernate》学习笔记
  - 进阶
tags:
  - Hibernate
---

## QBC&本地SQL查询

### QBC查询步骤

1. 创建一个Criteria对象

2. 添加查询条件

   > 在QBC中查询条件使用Restrictions的静态方法得到

3. 执行查询

```java
// 案例一
// 1. 创建Criteria对象
Criteria criteria = session.createCriteria(Employee.class);

//2. 添加查询条件
criteria.add(Restriction.eq("email","3232@qq.com"));
criteria.add(Restriction.eq("salary",5000F));

//3. 执行查询
Employee employee = criteria.uniqueResult();
```

```java
// 案例二
/* 
	1. AND : 使用Conjuction表示
	Conjuction本身就是Criterion对象
	且其中还可以添加Criterion对象
*/
Conjuction conjuction = Restrictions.conjuction();
conjuction.add(Restrictions.like("name","a",MatchMode));
conjuction.add(Restriction.eq('email','3232'));

/* 
	1. OR : 使用Disjuction表示
	Disjuction本身就是Criterion对象
	且其中还可以添加Criterion对象
*/
Disjuction disjuction = Restrictions.disjuction();
disjuction.add(Restrictions.like("name","a",MatchMode));
disjuction.add(Restriction.eq('email','3232'));
```

```java
// 案例三
// 统计查询 ： 使用Projection表示
Criteria criteria = session.createCriteria(Employee.class);
criteria.setProjection(Projection.max("salary"));
Employee employee = criteria.uniqueResult();
```

```java
// 案例四
Criteria criteria = session.createCriteria(Employee.class);
// 添加排序
criteria.addOrder(Order.asc("salary"));
criteria.addOrder(Order.desc("age"));

// 添加翻页
int pageSize = 5;
int pageNo = 3;
criteria.addFirstResult((pageNo - 1)* pageSize).setMaxResults(pageSize).list();
```

### 使用本地SQL

```java
String sql = "Insert into employee values(?,?)";
Query query = sessin.createSQLQuery(sql);
query.setInteger(0,1).setString(1,"Nilu").executeUpdate();
```

