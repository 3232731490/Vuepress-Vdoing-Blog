---
title: Hibernateé…ç½®æ–‡ä»¶
date: 2021-09-30 21:22:29
permalink: /pages/109a89/
categories:
  - ã€ŠHibernateã€‹å­¦ä¹ ç¬”è®°
  - åŸºç¡€
tags:
  - Hibernate
---

## hibernate.cfg.xml

### 1. åœ¨hibernateä¸­é…ç½®c3p0æ•°æ®æº

1.  å¯¼å…¥jaråŒ…

   ```xml
       <!--c3p0æ•°æ®æº-->
       <dependency>
         <groupId>org.hibernate</groupId><!--åŒ…-->
         <artifactId>hibernate-c3p0</artifactId><!--é¡¹ç›®å-->
         <version>5.5.7.Final</version><!--ç‰ˆæœ¬å·-->
       </dependency>
   ```

   

2.  åŠ å…¥é…ç½®

   ```xml
   	<property name="connection.provider_class"><!--è¿æ¥è¿æ¥æ± çš„é©±åŠ¨-->
           org.hibernate.c3p0.internal.C3P0ConnectionProvider
       </property>
       <property name="c3p0.min_size"><!--è¿æ¥æ± æ•°é‡åˆå§‹å€¼-->
           5
       </property>
       <property name="c3p0.max_size"><!--è¿æ¥æ± æ•°é‡æœ€å¤§å€¼-->
           10
       </property>
       <property name="c3p0.max_statements"><!--æœ€å¤šå¯¹æ•°æ®åº“çš„æ“ä½œæ•°ï¼Œæœ€å¤§æ‰§è¡Œçš„å‘½ä»¤çš„ä¸ªæ•°-->
           30
       </property>
       <property name="hibernate.c3p0.timeout"><!--æœ€å¤§ç©ºé—²æ—¶é—´-->
           600
       </property>
       <property name="hibernate.c3p0.idle_test_period"><!--å®šæ—¶æ£€æµ‹-->
           60
       </property>
       <property name="hibernate.c3p0.acquire_increment"><!--æ‰©å»ºçš„è¿æ¥æ± çš„æ•°é‡ï¼ˆè¿æ¥ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œ æ¯æ¬¡å¢åŠ çš„è¿æ¥æ•°ï¼‰-->
           1
       </property>
   ```

   

### 2. ä¸€äº›å…¶ä»–é…ç½®

1. `hibernate.jdbc.fetch_size`

   > è®¾å®šJDBCçš„Statementä¾æ¬¡è¯»å–æ•°æ®åº“ä¸­çš„è®°å½•æ¡æ•°
   >
   > > å€¼è¶Šå¤§ï¼Œè®¿é—®æ•°æ®åº“æ¬¡æ•°è¶Šå°‘ï¼Œé€Ÿåº¦è¶Šå¿«ï¼Œä½†æ˜¯å¯¹WEBæœåŠ¡å™¨æ¶ˆè€—è¶Šå¤§

2. `hibernate.jdbc.batch_size`

   > è®¾å®šå¯¹æ•°æ®åº“è¿›è¡Œæ‰¹é‡åˆ é™¤ã€æ‰¹é‡æ›´æ–°ã€æ‰¹é‡æ’å…¥æ—¶çš„æ‰¹æ¬¡å¤§å°

> ä»¥ä¸Šä¸¤ä¸ªé…ç½®å¯¹mysqlæ— æ•ˆï¼Œå¯¹Oracleæœ‰æ•ˆ...



## *.hbm.xml

### `hiberna-mapping`èŠ‚ç‚¹

1. `package`

   > é…ç½®å½“å‰é…ç½®æ–‡ä»¶çš„æ˜ å°„ç±»æ‰€åœ¨åŒ…å
   >
   > `<hibernate-mapping package="åŒ…å"> ... `

   ![ä¸»è¦é…ç½®]()

   

### `class`èŠ‚ç‚¹

1. `name`ã€`table`

   > name -- ç±»å  | table -- å¯¹åº”æ•°æ®åº“ä¸­çš„è¡¨å

2. `dynamic-insert`ã€`dynamic-update`

   > åŠ¨æ€æ›´æ–°ä¸åŠ¨æ€æ’å…¥ï¼Œæ ¹æ®ç”¨æˆ·æ‰§è¡Œå‘½ä»¤åŠ¨æ€ç”Ÿæˆsqlè¯­å¥ï¼Œæ¯”å¦‚åªæ›´æ–°æŸä¸€ä¸ªå­—æ®µåˆ™åªç”Ÿæˆæ›´æ–°è¿™ä¸ªå­—æ®µçš„sqlè¯­å¥

### `id`èŠ‚ç‚¹

1. `name` ã€`column`

   >  name -- å®ä½“ç±»å±æ€§å  |  column -- è¡¨ä¸­å¯¹åº”åˆ—å

2. `unsaved-value`

   > è®¾ç½®è¯¥å±æ€§åï¼ŒHibernateä¼šæ ¹æ®OIDå€¼æ¥åŒºåˆ†è¯¥å¯¹è±¡æ˜¯å¦ä¸ºä¸´æ—¶å¯¹è±¡

3. `generator`

   > ä¸»é”®ç”Ÿæˆå™¨
   >
   > 1. incrementï¼šç”±Hibernateä»¥é€’å¢çš„æ–¹å¼ä¸ºä»£ç†ä¸»é”®èµ‹å€¼ï¼Œå®¹æ˜“å‘ç”Ÿå¹¶å‘é—®é¢˜
   > 2. identityï¼šç”±åº•å±‚æ•°æ®åº“æ¥è´Ÿè´£ç”Ÿæˆæ ‡è¯†ç¬¦ï¼Œè¦æ±‚åº•å±‚æ•°æ®åº“å°†é€æ¸å®šä¹‰ä¸º`Auto increment`
   > 3. sequence: åˆ©ç”¨åº•å±‚æ•°æ®åº“æä¾›çš„åºåˆ—æ¥ç”Ÿæˆæ ‡è¯†ç¬¦
   > 4. hiloï¼šç”±hibernateæŒ‰ç…§ä¸€ç§high/lowç®—æ³•*ç”Ÿæˆæ ‡è¯†ç¬¦
   > 5. **native**ï¼šæ ¹æ®åº•å±‚æ•°æ®åº“å¯¹è‡ªåŠ¨ç”Ÿæˆæ ‡è¯†ç¬¦çš„æ”¯æŒèƒ½åŠ›ï¼Œæ¥è‡ªåŠ¨é€‰æ‹©ç”Ÿæˆæ ‡è¯†ç¬¦çš„æ–¹å¼ 

### `Property`

1. `name`ã€`column`

   > å®ä½“ç±»å±æ€§åä»¥åŠè¡¨ä¸­åˆ—å

2. `type`

   > æŒ‡å®šHibernateæ˜ å°„ç±»å‹ï¼Œå³Javaç±»å‹ä¸SQLç±»å‹çš„æ¡¥æ¢ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šï¼Œåˆ™Hibernateé€šè¿‡åå°„æœºåˆ¶è‡ªåŠ¨è·å–ï¼Œä¸è¿‡å»ºè®®æ˜¾ç¤ºæŒ‡å®š

3. `unique` ã€ `update` ã€ `index` ã€ `length`

   > å”¯ä¸€çº¦æŸï¼Œæ˜¯å¦å¯ä¿®æ”¹ã€ç´¢å¼•ã€é•¿åº¦é™åˆ¶

4. `formula`

   > æ´¾ç”Ÿå±æ€§ï¼šè®¾ç½®ä¸€ä¸ªSQLè¡¨è¾¾å¼ï¼ŒHibernateå°†æ ¹æ®å®ƒæ¥è®¡ç®—æ´¾ç”Ÿå±æ€§çš„å€¼
   >
   > > ä¹±å…¥ğŸ¤·â€â™€ï¸~~æ„Ÿè§‰å’Œvueè®¡ç®—å±æ€§å·®ä¸å¤š
   > >
   > > > è¯­æ³•ï¼š formula="(sql)"ï¼Œæ³¨æ„è¦åŠ "()"
   > > >
   > > > Sqlè¡¨è¾¾å¼ä¸­çš„åˆ—åå’Œè¡¨åéƒ½åº”è¯¥å’Œæ•°æ®åº“å¯¹åº”ï¼Œè€Œä¸æ˜¯å’ŒæŒä¹…åŒ–å¯¹è±¡çš„å±æ€§å¯¹åº”

5. `scale`

   > æŸ¥è¯¢floatæˆ–è€…doubleç±»å‹æ—¶ï¼Œè¿™ä¸ªå±æ€§ç”¨æ¥é…ç½®å°æ•°ä½æ•°

[å…¶ä»–é…ç½®å‚è€ƒåšå®¢]([Hibernateæ˜ å°„æ–‡ä»¶*.hbm.xmlçš„å…ƒç´ åŠå±æ€§è¯¦è§£ (biancheng.net)](http://c.biancheng.net/view/4177.html))



## æ˜ å°„Javaçš„äº‹ä»¶ã€æ—¥æœŸç±»å‹

### åŸºç¡€çŸ¥è¯†

1. åœ¨Javaä¸­ï¼Œä»£è¡¨æ—¶é—´å’Œæ—¥æœŸçš„ç±»å‹åŒ…æ‹¬ï¼š`java.util.Date`å’Œ`java.util.Calendar`ã€‚æ­¤å¤–åœ¨`JDBC API`ä¸­è¿˜æä¾›äº†3ä¸ªæ‰©å±•äº†`java.util.Date`ç±»çš„å­ç±»ï¼š`java.sql.Date`ï¼Œ`java.sql.Time`å’Œ`java.sql.Timestamp`ï¼Œè¿™ä¸‰ä¸ªç±»åˆ†åˆ«å’Œæ ‡å‡†`SQL`ç±»å‹ä¸­çš„` DATE`ï¼Œ`TIME`å’Œ`TIMESTAMP`ç±»å‹å¯¹åº”ã€‚
2. åœ¨æ ‡å‡†`SQL`ä¸­ï¼Œ`DATE`ç±»å‹è¡¨ç¤ºæ—¥æœŸï¼Œ`TIME `ç±»å‹è¡¨ç¤ºæ—¶é—´ï¼Œ`TIMESTAMP `ç±»å‹è¡¨ç¤ºæ—¶é—´æˆ³ï¼ŒåŒæ—¶åŒ…å«æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ã€‚

### å¦‚ä½•è¿›è¡Œæ˜ å°„ï¼Ÿ

1. ç”±äº`java.util.date`æ˜¯`JDBC API`çš„ä¸‰ä¸ªç±»çš„çˆ¶ç±»ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ä¸`SQL`ç±»å‹çš„ä¸‰ä¸ªç±»å‹æ˜ å°„

2. é‰´äº1ï¼Œæ‰€ä»¥åœ¨è®¾ç½®æŒä¹…åŒ–ç±»æ—¶ï¼Œè®¾ç½®ä¸º`java.util.date`

3. å¦‚ä½•æŠŠ`java.util.date`æ˜ å°„ä¸º` DATE`ï¼Œ`TIME`å’Œ`TIMESTAMP`ï¼Ÿ

   > å¯ä»¥é€šè¿‡propertyä¸­çš„typeå±æ€§è¿›è¡Œæ˜ å°„ï¼Œå¦‚type="date"ã€type=â€œtimeâ€ç­‰



## æ˜ å°„å¤§å¯¹è±¡ç±»å‹

> ç”±äºå¼€å‘ä¸­å¹¶ä¸å¸¸ç”¨ï¼Œè¿™é‡Œåªåšç®€å•äº†è§£å³å¯

![æ˜ å°„è¡¨](https://img-blog.csdn.net/20140531165528375)

1. åœ¨ Java ä¸­, `java.lang.String` å¯ç”¨äºè¡¨ç¤ºé•¿å­—ç¬¦ä¸²(é•¿åº¦è¶…è¿‡ 255), å­—èŠ‚æ•°ç»„ byte[] å¯ç”¨äºå­˜æ”¾å›¾ç‰‡æˆ–æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®. æ­¤å¤–, åœ¨ `JDBC API `ä¸­è¿˜æä¾›äº† `java.sql.Clob` å’Œ `java.sql.Blob` ç±»å‹, å®ƒä»¬åˆ†åˆ«å’Œæ ‡å‡† SQL ä¸­çš„ `CLOB` å’Œ` BLOB `ç±»å‹å¯¹åº”.` CLOB `è¡¨ç¤ºå­—ç¬¦ä¸²å¤§å¯¹è±¡(`Character Large Object`), BLOBè¡¨ç¤ºäºŒè¿›åˆ¶å¯¹è±¡(`Binary Large Object`)
2. `Mysql` ä¸æ”¯æŒæ ‡å‡† `SQL` çš„ `CLOB` ç±»å‹, åœ¨` Mysql `ä¸­, ç”¨ `TEXT`, `MEDIUMTEXT `åŠ `LONGTEXT` ç±»å‹æ¥è¡¨ç¤ºé•¿åº¦æ“ä½œ 255 çš„é•¿æ–‡æœ¬æ•°æ®
3. åœ¨æŒä¹…åŒ–ç±»ä¸­, äºŒè¿›åˆ¶å¤§å¯¹è±¡å¯ä»¥å£°æ˜ä¸º `byte[]` æˆ– `java.sql.Blob` ç±»å‹; å­—ç¬¦ä¸²å¯ä»¥å£°æ˜ä¸º `java.lang.String` æˆ– `java.sql.Clob`
4. å®é™…ä¸Šåœ¨ Java åº”ç”¨ç¨‹åºä¸­å¤„ç†é•¿åº¦è¶…è¿‡ 255 çš„å­—ç¬¦ä¸², ä½¿ç”¨` java.lang.String `æ¯” `java.sql.Clob` æ›´æ–¹ä¾¿



## æ˜ å°„ç»„æˆå…³ç³»

> æ˜ å°„ä¸€ä¸ªå®ä½“ç±»ä¸­åŒ…å«äº†å¦ä¸€ä¸ªå®ä½“ç±»çš„å®ä½“ç±»ï¼Œéœ€è¦ç”¨åˆ°`component`å±æ€§ï¼Œè¿™ä¸ªè¢«åŒ…å«çš„å®ä½“ç±»åœ¨Hibernateä¸­ç§°ä¸ºç»„ä»¶

### `component`

1. `class`ï¼šåŒ…å«çš„å®ä½“ç±»çš„ç±»å

2.  `name` ï¼š åŒ…å«çš„å®ä½“ç±»çš„åç§°

### `property`

1. `name`ã€`column`

   > æŒ‡å®šç»„æˆå…³ç³»çš„ç»„ä»¶çš„å±æ€§


